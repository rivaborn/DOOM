# File Overview

`sounds.c` is a pure data file containing the complete tables of sound effect and music information for the DOOM engine. It was originally generated by a sound utility tool (written by Dave Taylor at id Software) and subsequently maintained by hand. The file defines two global arrays — `S_sfx[]` and `S_music[]` — that act as the central database for every sound effect and music track in DOOM and DOOM II.

This file has no functions. It is entirely data initialization. The `s_sound.c` module reads these tables to drive sound playback, and other engine modules reference the `sfxenum_t` / `musicenum_t` enumerations (defined in `sounds.h`) to look up sounds by symbolic name.

---

## Global Variables

### `musicinfo_t S_music[]`

**Type:** Array of `musicinfo_t` (defined in `sounds.h`)
**Size:** `NUMMUSIC` entries (64 total — index 0 is a dummy null entry)

The complete table of music tracks. Each entry holds the 6-character base name of the WAD lump (without the `d_` prefix), and runtime fields initialized to zero:

| Index | Enum | Name | Notes |
|-------|------|------|-------|
| 0 | `mus_None` | (null) | Dummy entry |
| 1-9 | `mus_e1m1` to `mus_e1m9` | `"e1m1"` to `"e1m9"` | Doom Episode 1 maps |
| 10-18 | `mus_e2m1` to `mus_e2m9` | `"e2m1"` to `"e2m9"` | Doom Episode 2 maps |
| 19-27 | `mus_e3m1` to `mus_e3m9` | `"e3m1"` to `"e3m9"` | Doom Episode 3 maps |
| 28 | `mus_inter` | `"inter"` | Episode intermission |
| 29 | `mus_intro` | `"intro"` | Title screen |
| 30 | `mus_bunny` | `"bunny"` | Bunny screen (end of Episode 3) |
| 31 | `mus_victor` | `"victor"` | Victory screen |
| 32 | `mus_introa` | `"introa"` | Alternate intro |
| 33-63 | `mus_runnin` to `mus_dm2int` | Various | DOOM II map and special tracks |

The `lumpnum` and `handle` fields start at 0 and are filled in by `S_ChangeMusic` at runtime when a track is first requested.

---

### `sfxinfo_t S_sfx[]`

**Type:** Array of `sfxinfo_t` (defined in `sounds.h`)
**Size:** `NUMSFX` entries (110 total — index 0 is a dummy)

The complete table of sound effects. Each entry is initialized with the following fields:

```
{ name, singularity, priority, link, pitch, volume, data, usefulness, lumpnum }
```

- `name` — Up to 6-character lowercase lump name base (without the `"ds"` prefix used in the WAD).
- `singularity` — Boolean: if `true`, only one instance of this sound can play at a time across all channels.
- `priority` — Higher values mean higher priority when competing for channels.
- `link` — Pointer to another `sfxinfo_t` entry if this sound is an alias/variant (e.g., `sfx_chgun` links to `sfx_pistol`).
- `pitch` / `volume` — Pitch and volume offsets applied when a link is followed.
- `data` — Runtime pointer to loaded PCM data; starts as 0.
- `usefulness` — Cache counter; starts at -1 (uncached).
- `lumpnum` — WAD lump number; starts at -1 (not yet resolved).

**Notable entries:**

| Index | Enum | Name | Priority | Notes |
|-------|------|------|----------|-------|
| 0 | `sfx_None` | `"none"` | 0 | Dummy placeholder |
| 1 | `sfx_pistol` | `"pistol"` | 64 | Pistol fire |
| 2 | `sfx_shotgn` | `"shotgn"` | 64 | Shotgun fire |
| 10 | `sfx_sawup` | `"sawup"` | 64 | Chainsaw startup |
| 11 | `sfx_sawidl` | `"sawidl"` | 118 | Chainsaw idle (high priority) |
| 32 | `sfx_itemup` | `"itemup"` | 78 | Item pickup (singular) |
| 85 | `sfx_chgun` | `"chgun"` | 64 | Chaingun — linked to `sfx_pistol` with pitch=150 |
| ... | Various monster sit/act/death sounds | Various | 70-120 | Monster vocal effects |

The chaingun sound `sfx_chgun` is the only linked sound in the standard table. Its `link` field points directly to `&S_sfx[sfx_pistol]`, meaning the chaingun reuses the pistol fire sample at a modified pitch (150).

---

## Data Structures

Both data structures are defined in `sounds.h`. See `sounds.h.md` for full field documentation.

### `musicinfo_t` (defined in `sounds.h`)

```c
typedef struct {
    char*  name;      // 6-char base name
    int    lumpnum;   // filled at runtime
    void*  data;      // filled at runtime
    int    handle;    // filled at runtime
} musicinfo_t;
```

### `sfxinfo_t` (defined in `sounds.h`)

```c
struct sfxinfo_struct {
    char*        name;
    int          singularity;
    int          priority;
    sfxinfo_t*   link;
    int          pitch;
    int          volume;
    void*        data;
    int          usefulness;
    int          lumpnum;
};
```

---

## Dependencies

| File | Purpose |
|------|---------|
| `doomtype.h` | Basic type definitions (`boolean`, `byte`, etc.) |
| `sounds.h` | Structure and enumeration declarations for `sfxinfo_t`, `musicinfo_t`, `sfxenum_t`, `musicenum_t` |
